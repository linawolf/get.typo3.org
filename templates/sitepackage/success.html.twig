{% extends '@Template/layout.html.twig' %}
{% block title %}Success{% endblock %}
{% block body %}

    {% frame with { color: 'dark', height: 'small', center: true, indent: true, backgroundImage: asset("assets/Images/keyvisual.png") } %}
        <h1>Congratulations!</h1>
        <p class="lead">
            We have successfully generated your Site Package. You can review the generated configuration below, or
            download your Site Package.
        </p>
        <a href="{{ path('sitepackage_download') }}" class="btn btn-lg btn-primary">
            <span class="btn-text">Download</span>
        </a>
    {% endframe %}
    {% if sitepackage.typo3Version > 12 %}
        {% frame with { indent: true, id: 'sitepackage-installation', title: 'Install the Site Package', color: 'lighter' } %}
            <div class="accordion" id="accordion-installation">
                <div class="accordion-item card">
                    <div class="accordion-header card-header" id="accordion-heading-composer">
                        <h4 class="accordion-title">
                            <a href="#accordion-composer" class="accordion-title-link collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion-installation" aria-expanded="true" aria-controls="accordion-installation">
                                <span class="accordion-title-link-text">
                                    Composer-based TYPO3 installation
                                </span>
                                <span class="accordion-title-link-state"></span>
                            </a>
                        </h4>
                    </div>
                    <div id="accordion-composer" class="accordion-collapse collapse" aria-labelledby="accordion-heading-composer" data-bs-parent="#accordion-installation">
                        <div class="accordion-body card-body">
                            <div class="accordion-content">
                                <div class="accordion-content-item accordion-content-text">
                                    <p>Download the Site Package and save it into folder
                                        <a href="https://docs.typo3.org/permalink/t3coreapi:directory-packages@{{ sitepackage.typo3Version }}">packages</a>
                                        in the root of your TYPO3 installation.</p>
                                    <p>Require the Site Package using Composer: </p>
                                    <pre style="white-space: pre-line;">
                                        <code>composer req {{ sitepackage.vendorNameAlternative }}/{{ sitepackage.packageNameAlternative }}</code>
                                    </pre>
                                    {% include 'sitepackage/partials/typoscript-provider.twig' %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-header card-header" id="accordion-heading-classic">
                        <h4 class="accordion-title">
                            <a href="#accordion-classic" class="accordion-title-link collapsed" data-bs-toggle="collapse" data-bs-parent="#accordion-installation" aria-expanded="false" aria-controls="accordion-classic">
                                <span class="accordion-title-link-text">
                                    Classic TYPO3 installation
                                </span>
                                <span class="accordion-title-link-state"></span>
                            </a>
                        </h4>
                    </div>
                    <div id="accordion-classic" class="accordion-collapse collapse" aria-labelledby="accordion-heading-classic" data-bs-parent="#accordion-installation">
                        <div class="accordion-body card-body">
                            <div class="accordion-content">
                                <div class="accordion-content-item accordion-content-text">
                                    <p>Download the Site Package and save it into folder
                                        <a href="https://docs.typo3.org/permalink/t3coreapi:legacy-directory-typo3conf-ext@{{ sitepackage.typo3Version }}">typo3conf/ext/</a>
                                        in the root of your TYPO3 installation.</p>
                                    <p>Activate extension "{{ sitepackage.title }}" with key {{ sitepackage.extensionKey }} in the Extension Manager. </p>
                                    {% include 'sitepackage/partials/typoscript-provider.twig' %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endframe %}
    {% endif %}

    {% frame with { indent: true } %}
        <h2>Generated Configuration</h2>
        <h3>Base Package</h3>
        <dl class="row">
            <dt class="col-sm-3">TYPO3 Version</dt>
            <dd class="col-sm-9">{{ sitepackage.typo3Version }}</dd>
            <dt class="col-sm-3">Extension Key</dt>
            <dd class="col-sm-9">{{ sitepackage.basePackage }}</dd>
        </dl>
        <h3>Extension</h3>
        <dl class="row">
            <dt class="col-sm-3">Titel</dt>
            <dd class="col-sm-9">{{ sitepackage.title }}</dd>
            {% if sitepackage.description %}
            <dt class="col-sm-3">Description</dt>
            <dd class="col-sm-9">{{ sitepackage.description }}</dd>
            {% endif %}
            <dt class="col-sm-3">Extension Key</dt>
            <dd class="col-sm-9">{{ sitepackage.extensionKey }}</dd>
            {% if sitepackage.repositoryUrl %}
            <dt class="col-sm-3">Repository</dt>
            <dd class="col-sm-9">{{ sitepackage.repositoryUrl }}</dd>
            {% endif %}
        </dl>
        <h3>PHP</h3>
        <dl class="row">
            <dt class="col-sm-3">Vendor</dt>
            <dd class="col-sm-9">{{ sitepackage.vendorName }}</dd>
            <dt class="col-sm-3">Package</dt>
            <dd class="col-sm-9">{{ sitepackage.packageName }}</dd>
            <dt class="col-sm-3">PSR-4</dt>
            <dd class="col-sm-9">{{ sitepackage.vendorName }}\{{ sitepackage.packageName }}</dd>
            <dt class="col-sm-3">Composer</dt>
            <dd class="col-sm-9">{{ sitepackage.vendorNameAlternative }}/{{ sitepackage.packageNameAlternative }}</dd>
        </dl>
        <h3>Author</h3>
        <dl class="row">
            <dt class="col-sm-3">Name</dt>
            <dd class="col-sm-9">{{ sitepackage.author.name }}</dd>
            <dt class="col-sm-3">E-Mail</dt>
            <dd class="col-sm-9">{{ sitepackage.author.email }}</dd>
            <dt class="col-sm-3">Company</dt>
            <dd class="col-sm-9">{{ sitepackage.author.company }}</dd>
            <dt class="col-sm-3">Homepage</dt>
            <dd class="col-sm-9">{{ sitepackage.author.homepage }}</dd>
        </dl>
        <p>
            <a href="{{ path('sitepackage_new') }}" class="btn btn-light">
                <span class="btn-text">Restart</span>
            </a>
            <a href="{{ path('sitepackage_edit') }}" class="btn btn-primary">
                <span class="btn-text">Edit Configuration</span>
            </a>
        </p>
    {% endframe %}

{% endblock %}
